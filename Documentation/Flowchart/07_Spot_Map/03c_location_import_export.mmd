flowchart TD
    %% Location Import/Export Operations
    
    Start([üì•üì§ Import/Export Operations]) --> ImportExportOptions{Import/Export Options}
    
    %% Main import/export options
    ImportExportOptions --> ImportLocations[üì• Import Locations]
    ImportExportOptions --> ExportLocations[üì§ Export Locations]
    ImportExportOptions --> DataMapping[üîó Data Mapping]
    ImportExportOptions --> BatchProcessing[üì¶ Batch Processing]
    
    %% Import Locations Flow
    ImportLocations --> ImportOptions{Import Options}
    ImportOptions --> ImportCSV[üìã Import from CSV]
    ImportOptions --> ImportExcel[üìä Import from Excel]
    ImportOptions --> ImportGPX[üó∫Ô∏è Import from GPX]
    ImportOptions --> ImportKML[üåç Import from KML]
    ImportOptions --> ImportGeoJSON[üìç Import from GeoJSON]
    ImportOptions --> ImportAPI[üîå Import from API]
    
    ImportCSV --> UploadCSVFile[üìÅ Upload CSV File]
    ImportExcel --> UploadExcelFile[üìÅ Upload Excel File]
    ImportGPX --> UploadGPXFile[üìÅ Upload GPX File]
    ImportKML --> UploadKMLFile[üìÅ Upload KML File]
    ImportGeoJSON --> UploadGeoJSONFile[üìÅ Upload GeoJSON File]
    ImportAPI --> ConfigureAPIConnection[üîå Configure API Connection]
    
    UploadCSVFile --> ValidateImportFile[‚úÖ Validate Import File]
    UploadExcelFile --> ValidateImportFile
    UploadGPXFile --> ValidateImportFile
    UploadKMLFile --> ValidateImportFile
    UploadGeoJSONFile --> ValidateImportFile
    ConfigureAPIConnection --> FetchAPIData[üì• Fetch API Data]
    FetchAPIData --> ValidateImportFile
    
    ValidateImportFile --> ImportValidation{Import Valid?}
    ImportValidation -->|No| ShowImportErrors[‚ùå Show Import Errors]
    ImportValidation -->|Yes| MapImportFields[üîó Map Import Fields]
    ShowImportErrors --> ImportOptions
    
    MapImportFields --> FieldMappingInterface[üîó Field Mapping Interface]
    FieldMappingInterface --> MapRequiredFields[üìù Map Required Fields]
    MapRequiredFields --> MapOptionalFields[üìÑ Map Optional Fields]
    MapOptionalFields --> ValidateFieldMapping{Valid Mapping?}
    ValidateFieldMapping -->|No| FieldMappingInterface
    ValidateFieldMapping -->|Yes| PreviewImport[üëÅÔ∏è Preview Import]
    
    PreviewImport --> ImportPreviewTable[üìã Import Preview Table]
    ImportPreviewTable --> ConfirmImport{Confirm Import?}
    ConfirmImport -->|No| MapImportFields
    ConfirmImport -->|Yes| ProcessImport[‚öôÔ∏è Process Import]
    
    ProcessImport --> ImportProgress[üìä Import Progress]
    ImportProgress --> HandleImportConflicts{Import Conflicts?}
    HandleImportConflicts -->|Yes| ResolveConflicts[‚öôÔ∏è Resolve Conflicts]
    HandleImportConflicts -->|No| ImportCompleted[‚úÖ Import Completed]
    ResolveConflicts --> ConflictResolution{Resolution Method}
    ConflictResolution --> SkipConflicts[‚è≠Ô∏è Skip Conflicts]
    ConflictResolution --> OverwriteExisting[üîÑ Overwrite Existing]
    ConflictResolution --> CreateDuplicates[üìã Create Duplicates]
    SkipConflicts --> ImportCompleted
    OverwriteExisting --> ImportCompleted
    CreateDuplicates --> ImportCompleted
    
    %% Export Locations Flow
    ExportLocations --> ExportScope{Export Scope}
    ExportScope --> ExportAll[üìã Export All Locations]
    ExportScope --> ExportFiltered[üîΩ Export Filtered Locations]
    ExportScope --> ExportSelected[‚òëÔ∏è Export Selected Locations]
    ExportScope --> ExportByArea[üìç Export by Geographic Area]
    
    ExportAll --> SelectExportFormat{Export Format}
    ExportFiltered --> ApplyExportFilters[üîΩ Apply Export Filters]
    ExportSelected --> SelectLocationsToExport[‚òëÔ∏è Select Locations]
    ExportByArea --> DefineExportArea[üìç Define Geographic Area]
    
    ApplyExportFilters --> ExportFilterOptions[üîΩ Filter Options]
    ExportFilterOptions --> FilterByCategory[üìÇ Filter by Category]
    ExportFilterOptions --> FilterByTags[üè∑Ô∏è Filter by Tags]
    ExportFilterOptions --> FilterByDateRange[üìÖ Filter by Date Range]
    FilterByCategory --> SelectExportFormat
    FilterByTags --> SelectExportFormat
    FilterByDateRange --> SelectExportFormat
    
    SelectLocationsToExport --> SelectExportFormat
    DefineExportArea --> DrawExportArea[‚úèÔ∏è Draw Export Area]
    DrawExportArea --> ValidateExportArea{Valid Area?}
    ValidateExportArea -->|No| DefineExportArea
    ValidateExportArea -->|Yes| SelectExportFormat
    
    SelectExportFormat --> ExportFormatOptions{Format Options}
    ExportFormatOptions --> ExportLocationCSV[üìã Export as CSV]
    ExportFormatOptions --> ExportLocationExcel[üìä Export as Excel]
    ExportFormatOptions --> ExportLocationGPX[üó∫Ô∏è Export as GPX]
    ExportFormatOptions --> ExportLocationKML[üåç Export as KML]
    ExportFormatOptions --> ExportLocationGeoJSON[üìç Export as GeoJSON]
    
    ExportLocationCSV --> ConfigureExportSettings[‚öôÔ∏è Configure Export Settings]
    ExportLocationExcel --> ConfigureExportSettings
    ExportLocationGPX --> ConfigureExportSettings
    ExportLocationKML --> ConfigureExportSettings
    ExportLocationGeoJSON --> ConfigureExportSettings
    
    ConfigureExportSettings --> ExportSettingsPanel[‚öôÔ∏è Export Settings Panel]
    ExportSettingsPanel --> SelectExportFields[üìù Select Export Fields]
    SelectExportFields --> SetExportOptions[‚öôÔ∏è Set Export Options]
    SetExportOptions --> ProcessExport[‚öôÔ∏è Process Export]
    ProcessExport --> ExportProgress[üìä Export Progress]
    ExportProgress --> LocationsExported[‚úÖ Locations Exported]
    
    %% Data Mapping Flow
    DataMapping --> MappingOptions{Mapping Options}
    MappingOptions --> CreateMappingTemplate[üìù Create Mapping Template]
    MappingOptions --> EditMappingTemplate[‚úèÔ∏è Edit Mapping Template]
    MappingOptions --> DeleteMappingTemplate[üóëÔ∏è Delete Mapping Template]
    MappingOptions --> ViewMappingTemplates[üëÅÔ∏è View Templates]
    
    CreateMappingTemplate --> MappingTemplateForm[üìù Mapping Template Form]
    MappingTemplateForm --> DefineMappingRules[üìã Define Mapping Rules]
    DefineMappingRules --> SetFieldMappings[üîó Set Field Mappings]
    SetFieldMappings --> SetDataTransformations[üîÑ Set Data Transformations]
    SetDataTransformations --> ValidateMappingTemplate{Valid Template?}
    ValidateMappingTemplate -->|No| MappingTemplateForm
    ValidateMappingTemplate -->|Yes| SaveMappingTemplate[üíæ Save Template]
    SaveMappingTemplate --> MappingTemplateCreated[‚úÖ Template Created]
    
    %% Batch Processing Flow
    BatchProcessing --> BatchOptions{Batch Options}
    BatchOptions --> ScheduleBatchImport[‚è∞ Schedule Batch Import]
    BatchOptions --> ScheduleBatchExport[‚è∞ Schedule Batch Export]
    BatchOptions --> MonitorBatchJobs[üìä Monitor Batch Jobs]
    BatchOptions --> BatchJobHistory[üìú Batch Job History]
    
    ScheduleBatchImport --> BatchImportScheduler[‚è∞ Batch Import Scheduler]
    BatchImportScheduler --> SetImportSchedule[üìÖ Set Import Schedule]
    SetImportSchedule --> BatchImportScheduled[‚è∞ Batch Import Scheduled]
    
    ScheduleBatchExport --> BatchExportScheduler[‚è∞ Batch Export Scheduler]
    BatchExportScheduler --> SetExportSchedule[üìÖ Set Export Schedule]
    SetExportSchedule --> BatchExportScheduled[‚è∞ Batch Export Scheduled]
    
    MonitorBatchJobs --> BatchJobMonitor[üìä Batch Job Monitor]
    BatchJobMonitor --> ActiveBatchJobs[üîÑ Active Batch Jobs]
    ActiveBatchJobs --> BatchJobActions{Job Actions}
    BatchJobActions --> PauseBatchJob[‚è∏Ô∏è Pause Job]
    BatchJobActions --> ResumeBatchJob[‚ñ∂Ô∏è Resume Job]
    BatchJobActions --> CancelBatchJob[‚ùå Cancel Job]
    
    %% Return paths
    ImportCompleted --> ImportExportOptions
    LocationsExported --> ImportExportOptions
    MappingTemplateCreated --> MappingOptions
    EditMappingTemplate --> MappingOptions
    DeleteMappingTemplate --> MappingOptions
    ViewMappingTemplates --> MappingOptions
    MappingOptions --> ImportExportOptions
    BatchImportScheduled --> BatchOptions
    BatchExportScheduled --> BatchOptions
    PauseBatchJob --> ActiveBatchJobs
    ResumeBatchJob --> ActiveBatchJobs
    CancelBatchJob --> ActiveBatchJobs
    ActiveBatchJobs --> BatchJobMonitor
    BatchJobMonitor --> BatchOptions
    BatchJobHistory --> BatchOptions
    BatchOptions --> ImportExportOptions
    
    %% Back to dashboard
    ImportExportOptions --> Dashboard[üè† Back to Location Dashboard]
    
    %% Styling
    classDef startEnd fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000
    classDef process fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000
    classDef decision fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000
    classDef success fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef import fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef export fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000
    classDef mapping fill:#f1f8e9,stroke:#33691e,stroke-width:2px,color:#000
    classDef batch fill:#fff8e1,stroke:#f57f17,stroke-width:2px,color:#000
    classDef error fill:#ffebee,stroke:#c62828,stroke-width:2px,color:#000
    
    class Start,Dashboard startEnd
    class ImportLocations,ExportLocations,DataMapping,BatchProcessing,UploadCSVFile,UploadExcelFile,UploadGPXFile,UploadKMLFile,UploadGeoJSONFile,ConfigureAPIConnection,ValidateImportFile,ProcessImport,ProcessExport,CreateMappingTemplate,EditMappingTemplate,DeleteMappingTemplate,ViewMappingTemplates,ScheduleBatchImport,ScheduleBatchExport,MonitorBatchJobs,BatchJobHistory process
    class ImportExportOptions,ImportOptions,ImportValidation,ValidateFieldMapping,ConfirmImport,HandleImportConflicts,ConflictResolution,ExportScope,SelectExportFormat,ExportFormatOptions,ValidateExportArea,MappingOptions,ValidateMappingTemplate,BatchOptions,BatchJobActions decision
    class ImportCompleted,LocationsExported,MappingTemplateCreated,BatchImportScheduled,BatchExportScheduled success
    class ImportCSV,ImportExcel,ImportGPX,ImportKML,ImportGeoJSON,ImportAPI,MapImportFields,FieldMappingInterface,PreviewImport,ImportPreviewTable import
    class ExportAll,ExportFiltered,ExportSelected,ExportByArea,ExportLocationCSV,ExportLocationExcel,ExportLocationGPX,ExportLocationKML,ExportLocationGeoJSON,ConfigureExportSettings export
    class MappingTemplateForm,DefineMappingRules,SetFieldMappings,SetDataTransformations mapping
    class BatchImportScheduler,BatchExportScheduler,BatchJobMonitor,ActiveBatchJobs,PauseBatchJob,ResumeBatchJob,CancelBatchJob batch
    class ShowImportErrors error
