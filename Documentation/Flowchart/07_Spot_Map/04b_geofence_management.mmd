flowchart TD
    %% Geofence Management - Create, Edit, Delete Geofences
    
    Start([‚öôÔ∏è Geofence Management]) --> ManagementOptions{Management Options}
    
    %% Main management options
    ManagementOptions --> CreateGeofence[‚ûï Create Geofence]
    ManagementOptions --> EditGeofence[‚úèÔ∏è Edit Geofence]
    ManagementOptions --> DeleteGeofence[üóëÔ∏è Delete Geofence]
    ManagementOptions --> ViewGeofences[üëÅÔ∏è View All Geofences]
    ManagementOptions --> TestGeofence[üß™ Test Geofence]
    
    %% Create Geofence Flow
    CreateGeofence --> GeofenceType{Geofence Type}
    GeofenceType --> CircularGeofence[‚≠ï Circular Geofence]
    GeofenceType --> PolygonGeofence[üìê Polygon Geofence]
    GeofenceType --> RectangleGeofence[‚¨ú Rectangle Geofence]
    
    CircularGeofence --> SetCenter[üìç Set Center Point]
    SetCenter --> SetRadius[üìè Set Radius]
    SetRadius --> GeofenceSettings[‚öôÔ∏è Geofence Settings]
    
    PolygonGeofence --> DrawPolygon[‚úèÔ∏è Draw Polygon]
    DrawPolygon --> GeofenceSettings
    
    RectangleGeofence --> DrawRectangle[‚¨ú Draw Rectangle]
    DrawRectangle --> GeofenceSettings
    
    GeofenceSettings --> SetGeofenceName[üìù Set Geofence Name]
    SetGeofenceName --> SetDescription[üìÑ Set Description]
    SetDescription --> ConfigureTriggers[üéØ Configure Triggers]
    
    ConfigureTriggers --> TriggerTypes{Trigger Type}
    TriggerTypes --> EntryTrigger[üì• Entry Trigger]
    TriggerTypes --> ExitTrigger[üì§ Exit Trigger]
    TriggerTypes --> DwellTrigger[‚è±Ô∏è Dwell Trigger]
    
    EntryTrigger --> ValidateGeofence{Validate Geofence?}
    ExitTrigger --> ValidateGeofence
    DwellTrigger --> SetDwellTime[‚è∞ Set Dwell Time]
    SetDwellTime --> ValidateGeofence
    
    ValidateGeofence -->|Invalid| GeofenceSettings
    ValidateGeofence -->|Valid| SaveGeofence[üíæ Save Geofence]
    SaveGeofence --> GeofenceCreated[‚úÖ Geofence Created]
    
    %% Edit Geofence Flow
    EditGeofence --> SelectEditGeofence[üéØ Select Geofence]
    SelectEditGeofence --> LoadGeofenceData[üì• Load Geofence Data]
    LoadGeofenceData --> EditGeofenceForm[üìù Edit Geofence Form]
    EditGeofenceForm --> UpdateGeofenceShape[üìê Update Shape]
    UpdateGeofenceShape --> UpdateGeofenceSettings[‚öôÔ∏è Update Settings]
    UpdateGeofenceSettings --> UpdateTriggers[üéØ Update Triggers]
    UpdateTriggers --> ValidateGeofenceUpdate{Validate Update?}
    ValidateGeofenceUpdate -->|Invalid| EditGeofenceForm
    ValidateGeofenceUpdate -->|Valid| SaveGeofenceUpdate[üíæ Save Update]
    SaveGeofenceUpdate --> GeofenceUpdated[‚úÖ Geofence Updated]
    
    %% Delete Geofence Flow
    DeleteGeofence --> SelectDeleteGeofence[üéØ Select Geofence]
    SelectDeleteGeofence --> CheckActiveAlerts{Has Active Alerts?}
    CheckActiveAlerts -->|Yes| HandleActiveAlerts[üîî Handle Active Alerts]
    CheckActiveAlerts -->|No| ConfirmGeofenceDelete{Confirm Delete?}
    HandleActiveAlerts --> ResolveActiveAlerts[‚úÖ Resolve Active Alerts]
    ResolveActiveAlerts --> ConfirmGeofenceDelete
    ConfirmGeofenceDelete -->|No| ManagementOptions
    ConfirmGeofenceDelete -->|Yes| RemoveGeofence[üóëÔ∏è Remove Geofence]
    RemoveGeofence --> GeofenceDeleted[‚úÖ Geofence Deleted]
    
    %% View Geofences Flow
    ViewGeofences --> GeofencesList[üìã Geofences List]
    GeofencesList --> GeofenceListActions{List Actions}
    GeofenceListActions --> FilterGeofences[üîΩ Filter Geofences]
    GeofenceListActions --> SortGeofences[‚ÜïÔ∏è Sort Geofences]
    GeofenceListActions --> SearchGeofences[üîç Search Geofences]
    GeofenceListActions --> ViewGeofenceDetails[üëÅÔ∏è View Details]
    GeofenceListActions --> ToggleGeofenceStatus[üîÑ Toggle Status]
    
    FilterGeofences --> GeofenceFilterOptions[üîΩ Filter Options]
    GeofenceFilterOptions --> FilterByType[üìÇ Filter by Type]
    GeofenceFilterOptions --> FilterByStatus[üîò Filter by Status]
    GeofenceFilterOptions --> FilterByTrigger[üéØ Filter by Trigger]
    FilterByType --> FilteredGeofences[üìã Filtered Results]
    FilterByStatus --> FilteredGeofences
    FilterByTrigger --> FilteredGeofences
    
    ToggleGeofenceStatus --> ToggleStatus[üîÑ Toggle Active/Inactive]
    ToggleStatus --> StatusUpdated[‚úÖ Status Updated]
    
    %% Test Geofence Flow
    TestGeofence --> SelectTestGeofence[üéØ Select Geofence]
    SelectTestGeofence --> TestOptions{Test Options}
    TestOptions --> SimulateEntry[üì• Simulate Entry]
    TestOptions --> SimulateExit[üì§ Simulate Exit]
    TestOptions --> SimulateDwell[‚è±Ô∏è Simulate Dwell]
    
    SimulateEntry --> RunEntryTest[üß™ Run Entry Test]
    SimulateExit --> RunExitTest[üß™ Run Exit Test]
    SimulateDwell --> RunDwellTest[üß™ Run Dwell Test]
    
    RunEntryTest --> TestResults[üìä Test Results]
    RunExitTest --> TestResults
    RunDwellTest --> TestResults
    
    TestResults --> TestAnalysis[üìà Test Analysis]
    TestAnalysis --> TestReport[üìÑ Test Report]
    
    %% Return paths
    GeofenceCreated --> ManagementOptions
    GeofenceUpdated --> ManagementOptions
    GeofenceDeleted --> ManagementOptions
    FilteredGeofences --> GeofencesList
    SortGeofences --> GeofencesList
    SearchGeofences --> GeofencesList
    ViewGeofenceDetails --> GeofencesList
    StatusUpdated --> GeofencesList
    GeofencesList --> ManagementOptions
    TestReport --> ManagementOptions
    
    %% Back to dashboard
    ManagementOptions --> Dashboard[üè† Back to Geofencing Dashboard]
    
    %% Styling
    classDef startEnd fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000
    classDef process fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000
    classDef decision fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000
    classDef success fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef create fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef edit fill:#f1f8e9,stroke:#33691e,stroke-width:2px,color:#000
    classDef test fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000
    classDef settings fill:#fff8e1,stroke:#f57f17,stroke-width:2px,color:#000
    
    class Start,Dashboard startEnd
    class CreateGeofence,EditGeofence,DeleteGeofence,ViewGeofences,TestGeofence,SelectEditGeofence,LoadGeofenceData,SelectDeleteGeofence,HandleActiveAlerts,GeofencesList,SelectTestGeofence process
    class ManagementOptions,GeofenceType,TriggerTypes,ValidateGeofence,ValidateGeofenceUpdate,CheckActiveAlerts,ConfirmGeofenceDelete,GeofenceListActions,TestOptions decision
    class GeofenceCreated,GeofenceUpdated,GeofenceDeleted,StatusUpdated success
    class CircularGeofence,PolygonGeofence,RectangleGeofence,SetCenter,SetRadius,DrawPolygon,DrawRectangle create
    class EditGeofenceForm,UpdateGeofenceShape,UpdateGeofenceSettings,UpdateTriggers edit
    class SimulateEntry,SimulateExit,SimulateDwell,RunEntryTest,RunExitTest,RunDwellTest,TestResults,TestAnalysis,TestReport test
    class GeofenceSettings,SetGeofenceName,SetDescription,ConfigureTriggers,EntryTrigger,ExitTrigger,DwellTrigger,SetDwellTime settings
