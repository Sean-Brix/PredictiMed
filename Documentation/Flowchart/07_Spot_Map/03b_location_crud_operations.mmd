flowchart TD
    %% Location CRUD Operations - Add, Edit, Delete Locations
    
    Start([‚öôÔ∏è Location CRUD Operations]) --> CRUDOptions{CRUD Operations}
    
    %% Main CRUD operations
    CRUDOptions --> AddLocation[‚ûï Add Location]
    CRUDOptions --> EditLocation[‚úèÔ∏è Edit Location]
    CRUDOptions --> DeleteLocation[üóëÔ∏è Delete Location]
    CRUDOptions --> BulkOperations[üì¶ Bulk Operations]
    
    %% Add Location Flow
    AddLocation --> LocationMethod{Location Method}
    LocationMethod --> ManualEntry[‚úçÔ∏è Manual Entry]
    LocationMethod --> MapClick[üñ±Ô∏è Click on Map]
    LocationMethod --> GPSCapture[üìç GPS Capture]
    LocationMethod --> AddressLookup[üîç Address Lookup]
    
    ManualEntry --> LocationForm[üìù Location Form]
    MapClick --> LocationForm
    GPSCapture --> LocationForm
    AddressLookup --> AddressInput[üè† Address Input]
    AddressInput --> GeocodeAddress[üîç Geocode Address]
    GeocodeAddress --> LocationForm
    
    LocationForm --> BasicLocationInfo[üìã Basic Information]
    BasicLocationInfo --> LocationName[üìù Location Name]
    LocationName --> LocationDescription[üìÑ Description]
    LocationDescription --> LocationCategory[üìÇ Category]
    LocationCategory --> LocationTags[üè∑Ô∏è Tags]
    
    LocationTags --> LocationAttributes[üìä Location Attributes]
    LocationAttributes --> SetAccessibility[‚ôø Accessibility]
    SetAccessibility --> SetOperatingHours[‚è∞ Operating Hours]
    SetOperatingHours --> SetContactInfo[üìû Contact Info]
    SetContactInfo --> SetCapacity[üë• Capacity]
    
    SetCapacity --> ValidateLocation{Validate Location?}
    ValidateLocation -->|Invalid| LocationForm
    ValidateLocation -->|Valid| SaveLocation[üíæ Save Location]
    SaveLocation --> LocationCreated[‚úÖ Location Created]
    
    %% Edit Location Flow
    EditLocation --> SelectLocationToEdit[üéØ Select Location]
    SelectLocationToEdit --> LoadLocationData[üì• Load Location Data]
    LoadLocationData --> EditLocationForm[üìù Edit Location Form]
    EditLocationForm --> UpdateBasicInfo[üìù Update Basic Info]
    UpdateBasicInfo --> UpdateCoordinates[üìç Update Coordinates]
    UpdateCoordinates --> UpdateAttributes[üìä Update Attributes]
    UpdateAttributes --> ValidateLocationUpdate{Validate Update?}
    ValidateLocationUpdate -->|Invalid| EditLocationForm
    ValidateLocationUpdate -->|Valid| SaveLocationUpdate[üíæ Save Update]
    SaveLocationUpdate --> LocationUpdated[‚úÖ Location Updated]
    
    %% Delete Location Flow
    DeleteLocation --> SelectLocationToDelete[üéØ Select Location]
    SelectLocationToDelete --> CheckLocationUsage{Location in Use?}
    CheckLocationUsage -->|Yes| ShowUsageDetails[üìã Show Usage Details]
    CheckLocationUsage -->|No| ConfirmLocationDelete{Confirm Delete?}
    ShowUsageDetails --> HandleUsageDependencies[‚öôÔ∏è Handle Dependencies]
    HandleUsageDependencies --> ConfirmLocationDelete
    ConfirmLocationDelete -->|No| CRUDOptions
    ConfirmLocationDelete -->|Yes| DeleteLocationData[üóëÔ∏è Delete Location]
    DeleteLocationData --> LocationDeleted[‚úÖ Location Deleted]
    
    %% Bulk Operations Flow
    BulkOperations --> BulkOptions{Bulk Options}
    BulkOptions --> BulkAdd[‚ûï Bulk Add]
    BulkOptions --> BulkEdit[‚úèÔ∏è Bulk Edit]
    BulkOptions --> BulkDelete[üóëÔ∏è Bulk Delete]
    BulkOptions --> BulkUpdateTags[üè∑Ô∏è Bulk Update Tags]
    BulkOptions --> BulkUpdateCategory[üìÇ Bulk Update Category]
    
    BulkAdd --> BulkAddMethod{Bulk Add Method}
    BulkAddMethod --> UploadLocationFile[üìÅ Upload Location File]
    BulkAddMethod --> BulkManualEntry[‚úçÔ∏è Bulk Manual Entry]
    UploadLocationFile --> ValidateBulkData[‚úÖ Validate Bulk Data]
    BulkManualEntry --> ValidateBulkData
    ValidateBulkData --> BulkValidation{Bulk Valid?}
    BulkValidation -->|No| ShowValidationErrors[‚ùå Show Errors]
    BulkValidation -->|Yes| ProcessBulkAdd[‚öôÔ∏è Process Bulk Add]
    ShowValidationErrors --> BulkAdd
    ProcessBulkAdd --> BulkLocationsAdded[‚úÖ Bulk Locations Added]
    
    BulkEdit --> SelectLocationsToEdit[‚òëÔ∏è Select Locations]
    SelectLocationsToEdit --> BulkEditOptions{Edit Options}
    BulkEditOptions --> BulkUpdateInfo[üìù Bulk Update Info]
    BulkEditOptions --> BulkUpdateCoordinates[üìç Bulk Update Coordinates]
    BulkEditOptions --> BulkUpdateAttributes[üìä Bulk Update Attributes]
    BulkUpdateInfo --> ProcessBulkEdit[‚öôÔ∏è Process Bulk Edit]
    BulkUpdateCoordinates --> ProcessBulkEdit
    BulkUpdateAttributes --> ProcessBulkEdit
    ProcessBulkEdit --> BulkLocationsEdited[‚úÖ Bulk Locations Edited]
    
    BulkDelete --> SelectLocationsToDelete[‚òëÔ∏è Select Locations]
    SelectLocationsToDelete --> ConfirmBulkDelete{Confirm Bulk Delete?}
    ConfirmBulkDelete -->|No| BulkOptions
    ConfirmBulkDelete -->|Yes| ProcessBulkDelete[üóëÔ∏è Process Bulk Delete]
    ProcessBulkDelete --> BulkLocationsDeleted[‚úÖ Bulk Locations Deleted]
    
    BulkUpdateTags --> SelectLocationsForTags[‚òëÔ∏è Select Locations]
    SelectLocationsForTags --> TagUpdateOptions{Tag Options}
    TagUpdateOptions --> AddTags[‚ûï Add Tags]
    TagUpdateOptions --> RemoveTags[‚ûñ Remove Tags]
    TagUpdateOptions --> ReplaceTags[üîÑ Replace Tags]
    AddTags --> ProcessTagUpdate[‚öôÔ∏è Process Tag Update]
    RemoveTags --> ProcessTagUpdate
    ReplaceTags --> ProcessTagUpdate
    ProcessTagUpdate --> TagsUpdated[‚úÖ Tags Updated]
    
    BulkUpdateCategory --> SelectLocationsForCategory[‚òëÔ∏è Select Locations]
    SelectLocationsForCategory --> SelectNewCategory[üìÇ Select New Category]
    SelectNewCategory --> ProcessCategoryUpdate[‚öôÔ∏è Process Category Update]
    ProcessCategoryUpdate --> CategoriesUpdated[‚úÖ Categories Updated]
    
    %% Return paths
    LocationCreated --> CRUDOptions
    LocationUpdated --> CRUDOptions
    LocationDeleted --> CRUDOptions
    BulkLocationsAdded --> BulkOptions
    BulkLocationsEdited --> BulkOptions
    BulkLocationsDeleted --> BulkOptions
    TagsUpdated --> BulkOptions
    CategoriesUpdated --> BulkOptions
    BulkOptions --> CRUDOptions
    
    %% Back to dashboard
    CRUDOptions --> Dashboard[üè† Back to Location Dashboard]
    
    %% Styling
    classDef startEnd fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000
    classDef process fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000
    classDef decision fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000
    classDef success fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef form fill:#f1f8e9,stroke:#33691e,stroke-width:2px,color:#000
    classDef bulk fill:#e3f2fd,stroke:#1976d2,stroke-width:2px,color:#000
    classDef coordinates fill:#fff8e1,stroke:#f57f17,stroke-width:2px,color:#000
    classDef error fill:#ffebee,stroke:#c62828,stroke-width:2px,color:#000
    
    class Start,Dashboard startEnd
    class AddLocation,EditLocation,DeleteLocation,BulkOperations,SelectLocationToEdit,LoadLocationData,SelectLocationToDelete,ShowUsageDetails,HandleUsageDependencies,UploadLocationFile,ValidateBulkData,ProcessBulkAdd,SelectLocationsToEdit,ProcessBulkEdit,SelectLocationsToDelete,ProcessBulkDelete process
    class CRUDOptions,LocationMethod,ValidateLocation,ValidateLocationUpdate,CheckLocationUsage,ConfirmLocationDelete,BulkOptions,BulkAddMethod,BulkValidation,BulkEditOptions,ConfirmBulkDelete,TagUpdateOptions decision
    class LocationCreated,LocationUpdated,LocationDeleted,BulkLocationsAdded,BulkLocationsEdited,BulkLocationsDeleted,TagsUpdated,CategoriesUpdated success
    class LocationForm,BasicLocationInfo,EditLocationForm,UpdateBasicInfo form
    class BulkAdd,BulkEdit,BulkDelete,BulkUpdateTags,BulkUpdateCategory,SelectLocationsForTags,SelectLocationsForCategory bulk
    class ManualEntry,MapClick,GPSCapture,AddressLookup,AddressInput,GeocodeAddress,UpdateCoordinates coordinates
    class ShowValidationErrors error
