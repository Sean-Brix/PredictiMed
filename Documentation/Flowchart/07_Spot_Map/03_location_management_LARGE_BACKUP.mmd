flowchart TD
    %% Location Management Module
    
    Start([üìç Location Management]) --> LocationDashboard[üìä Location Dashboard]
    LocationDashboard --> LocationActions{Select Action}
    
    %% Main location actions
    LocationActions --> AddLocation[‚ûï Add Location]
    LocationActions --> EditLocation[‚úèÔ∏è Edit Location]
    LocationActions --> DeleteLocation[üóëÔ∏è Delete Location]
    LocationActions --> ViewLocations[üëÅÔ∏è View All Locations]
    LocationActions --> ImportLocations[üì• Import Locations]
    LocationActions --> ExportLocations[üì§ Export Locations]
    
    %% Add Location Flow
    AddLocation --> LocationMethod{Location Method}
    LocationMethod --> ManualEntry[‚úçÔ∏è Manual Entry]
    LocationMethod --> MapClick[üñ±Ô∏è Click on Map]
    LocationMethod --> GPSCapture[üìç GPS Capture]
    LocationMethod --> AddressLookup[üîç Address Lookup]
    
    ManualEntry --> LocationForm[üìù Location Entry Form]
    MapClick --> ClickOnMap[üó∫Ô∏è Click Location on Map]
    GPSCapture --> CaptureGPSLocation[üì° Capture GPS Coordinates]
    AddressLookup --> AddressSearch[üîç Search Address]
    
    ClickOnMap --> CoordinatesCapture[üìç Capture Coordinates]
    CaptureGPSLocation --> CoordinatesCapture
    AddressSearch --> AddressFound{Address Found?}
    AddressFound -->|No| AddressNotFound[‚ùå Address Not Found]
    AddressFound -->|Yes| CoordinatesCapture
    
    CoordinatesCapture --> LocationForm
    LocationForm --> FillLocationDetails[üìù Fill Location Details]
    FillLocationDetails --> LocationCategory[üìÇ Select Category]
    LocationCategory --> LocationStatus[üîò Set Status]
    LocationStatus --> LocationDescription[üìÑ Add Description]
    LocationDescription --> AttachImages[üì∑ Attach Images]
    AttachImages --> ValidateLocation{Validate Location?}
    ValidateLocation -->|Invalid| LocationForm
    ValidateLocation -->|Valid| SaveLocation[üíæ Save Location]
    SaveLocation --> LocationAdded[‚úÖ Location Added]
    
    %% Edit Location Flow
    EditLocation --> SelectEditLocation[üéØ Select Location]
    SelectEditLocation --> LoadLocationData[üì• Load Location Data]
    LoadLocationData --> EditLocationForm[üìù Edit Location Form]
    EditLocationForm --> UpdateCoordinates[üìç Update Coordinates]
    UpdateCoordinates --> UpdateCategory[üìÇ Update Category]
    UpdateCategory --> UpdateStatus[üîò Update Status]
    UpdateStatus --> UpdateDescription[üìÑ Update Description]
    UpdateDescription --> UpdateImages[üì∑ Update Images]
    UpdateImages --> ValidateLocationUpdate{Validate Update?}
    ValidateLocationUpdate -->|Invalid| EditLocationForm
    ValidateLocationUpdate -->|Valid| SaveLocationUpdate[üíæ Save Update]
    SaveLocationUpdate --> LocationUpdated[‚úÖ Location Updated]
    
    %% Delete Location Flow
    DeleteLocation --> SelectDeleteLocation[üéØ Select Location]
    SelectDeleteLocation --> CheckDependencies{Has Dependencies?}
    CheckDependencies -->|Yes| ShowDependencies[‚ö†Ô∏è Show Dependencies]
    CheckDependencies -->|No| ConfirmDelete{Confirm Delete?}
    ShowDependencies --> HandleDependencies[üîÑ Handle Dependencies]
    HandleDependencies --> ConfirmDelete
    ConfirmDelete -->|No| LocationDashboard
    ConfirmDelete -->|Yes| DeleteLocationData[üóëÔ∏è Delete Location]
    DeleteLocationData --> LocationDeleted[‚úÖ Location Deleted]
    
    %% View Locations Flow
    ViewLocations --> LocationList[üìã Location List]
    LocationList --> LocationListActions{List Action}
    LocationListActions --> SortLocations[‚ÜïÔ∏è Sort Locations]
    LocationListActions --> FilterLocationList[üîΩ Filter List]
    LocationListActions --> SearchLocationList[üîç Search List]
    LocationListActions --> ViewLocationDetails[üëÅÔ∏è View Details]
    LocationListActions --> BulkActions[üì¶ Bulk Actions]
    
    SortLocations --> SortOptions[‚ÜïÔ∏è Sort Options]
    SortOptions --> SortByName[üî§ Sort by Name]
    SortOptions --> SortByCategory[üìÇ Sort by Category]
    SortOptions --> SortByDate[üìÖ Sort by Date]
    SortOptions --> SortByStatus[üîò Sort by Status]
    
    FilterLocationList --> FilterListOptions[üîΩ Filter Options]
    SearchLocationList --> SearchListInput[üîç Search Input]
    ViewLocationDetails --> LocationDetailsView[üìÑ Location Details]
    
    BulkActions --> BulkActionOptions{Bulk Action}
    BulkActionOptions --> BulkDelete[üóëÔ∏è Bulk Delete]
    BulkActionOptions --> BulkStatusUpdate[üîò Bulk Status Update]
    BulkActionOptions --> BulkCategoryUpdate[üìÇ Bulk Category Update]
    BulkActionOptions --> BulkExport[üì§ Bulk Export]
    
    %% Import Locations Flow
    ImportLocations --> ImportMethod{Import Method}
    ImportMethod --> CSVImport[üìÑ CSV Import]
    ImportMethod --> ExcelImport[üìä Excel Import]
    ImportMethod --> JSONImport[üìã JSON Import]
    ImportMethod --> KMLImport[üó∫Ô∏è KML Import]
    
    CSVImport --> UploadCSVFile[üìÅ Upload CSV File]
    ExcelImport --> UploadExcelFile[üìÅ Upload Excel File]
    JSONImport --> UploadJSONFile[üìÅ Upload JSON File]
    KMLImport --> UploadKMLFile[üìÅ Upload KML File]
    
    UploadCSVFile --> ValidateImportData[‚úÖ Validate Import Data]
    UploadExcelFile --> ValidateImportData
    UploadJSONFile --> ValidateImportData
    UploadKMLFile --> ValidateImportData
    
    ValidateImportData --> ImportValidation{Data Valid?}
    ImportValidation -->|No| ImportErrors[‚ùå Show Import Errors]
    ImportValidation -->|Yes| PreviewImport[üëÅÔ∏è Preview Import]
    PreviewImport --> ConfirmImport{Confirm Import?}
    ConfirmImport -->|No| ImportLocations
    ConfirmImport -->|Yes| ProcessImport[‚öôÔ∏è Process Import]
    ProcessImport --> ImportCompleted[‚úÖ Import Completed]
    ImportErrors --> ImportLocations
    
    %% Export Locations Flow
    ExportLocations --> ExportOptions{Export Format}
    ExportOptions --> ExportCSV[üìÑ Export as CSV]
    ExportOptions --> ExportExcel[üìä Export as Excel]
    ExportOptions --> ExportJSON[üìã Export as JSON]
    ExportOptions --> ExportKML[üó∫Ô∏è Export as KML]
    
    ExportCSV --> GenerateCSVExport[üìÑ Generate CSV]
    ExportExcel --> GenerateExcelExport[üìä Generate Excel]
    ExportJSON --> GenerateJSONExport[üìã Generate JSON]
    ExportKML --> GenerateKMLExport[üó∫Ô∏è Generate KML]
    
    GenerateCSVExport --> ExportCompleted[‚úÖ Export Completed]
    GenerateExcelExport --> ExportCompleted
    GenerateJSONExport --> ExportCompleted
    GenerateKMLExport --> ExportCompleted
    
    %% Return paths
    LocationAdded --> LocationDashboard
    LocationUpdated --> LocationDashboard
    LocationDeleted --> LocationDashboard
    AddressNotFound --> AddressLookup
    SortByName --> LocationList
    SortByCategory --> LocationList
    SortByDate --> LocationList
    SortByStatus --> LocationList
    FilterListOptions --> LocationList
    SearchListInput --> LocationList
    LocationDetailsView --> LocationList
    BulkDelete --> LocationList
    BulkStatusUpdate --> LocationList
    BulkCategoryUpdate --> LocationList
    BulkExport --> LocationList
    ImportCompleted --> LocationDashboard
    ExportCompleted --> LocationDashboard
    
    %% Back to main dashboard
    LocationDashboard --> Dashboard[üè† Back to Dashboard]
    
    %% Styling
    classDef startEnd fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#000
    classDef process fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#000
    classDef decision fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000
    classDef success fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#000
    classDef error fill:#ffebee,stroke:#c62828,stroke-width:2px,color:#000
    classDef form fill:#f1f8e9,stroke:#33691e,stroke-width:2px,color:#000
    classDef upload fill:#e8eaf6,stroke:#3f51b5,stroke-width:2px,color:#000
    
    class Start,Dashboard startEnd
    class LocationDashboard,AddLocation,EditLocation,DeleteLocation,ViewLocations,ImportLocations,ExportLocations,ManualEntry,MapClick,GPSCapture,AddressLookup,ClickOnMap,CaptureGPSLocation,AddressSearch,LoadLocationData,SelectEditLocation,SelectDeleteLocation,LocationList,UploadCSVFile,UploadExcelFile,UploadJSONFile,UploadKMLFile,ProcessImport,GenerateCSVExport,GenerateExcelExport,GenerateJSONExport,GenerateKMLExport process
    class LocationActions,LocationMethod,AddressFound,ValidateLocation,ValidateLocationUpdate,CheckDependencies,ConfirmDelete,LocationListActions,BulkActionOptions,ImportMethod,ImportValidation,ConfirmImport,ExportOptions decision
    class LocationAdded,LocationUpdated,LocationDeleted,ImportCompleted,ExportCompleted success
    class AddressNotFound,ImportErrors error
    class LocationForm,EditLocationForm,FillLocationDetails,LocationCategory,LocationStatus,LocationDescription,AttachImages form
    class ValidateImportData,PreviewImport upload
