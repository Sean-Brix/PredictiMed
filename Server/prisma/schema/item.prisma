//? ======================================= ITEM SCHEMA ======================================= ?//

model InventoryItem {
    id          String        @id @default(cuid())
    name        String        @unique
    description String?
    picture     Bytes?
    category    item_category @default(Other)
    createdAt   DateTime      @default(now())
    updatedAt   DateTime      @updatedAt

    // Relations
    item_stacks ItemStack[]

    @@map("inventory_items")
}

//? ====================================== STACKS SCHEMA ====================================== ?//
model ItemStack {
    id        String      @id @default(cuid())
    itemId    String
    quantity  Int         @default(1)
    status    item_status @default(Available)
    createdAt DateTime    @default(now())
    updatedAt DateTime    @updatedAt

    // Relations
    item             InventoryItem     @relation(fields: [itemId], references: [id])
    itemTransactions ItemTransaction[]

    @@map("item_stacks")
}

//? ==================================== ITEM TRANSACTIONS ==================================== ?//

model ItemTransaction {
    id              String               @id @default(cuid())
    itemStackId     String
    accountId       String
    quantity        Int                  @default(1)
    transactionType String
    status          transaction_response @default(Pending)
    createdAt       DateTime             @default(now())
    updatedAt       DateTime             @updatedAt

    // Relations
    itemStack ItemStack @relation(fields: [itemStackId], references: [id])
    account   Account   @relation(fields: [accountId], references: [id])

    @@map("item_transactions")
}

enum transaction_response {
    Pending
    Approved
    Rejected
}

//? ========================================== ENUMS ========================================== ?//

enum item_status {
    Available
    Unavailable
    Damaged
    EIC
    Distributed
}

enum item_category {
    Farming_Equipment
    Harvesting_Tools
    Irrigation_Systems
    Storage_Equipment
    Processing_Equipment
    Safety_Gear
    Pest_Control
    Livestock_Equipment
    Measuring_Tools
    Fisheries
    Machinery
    Other
}
